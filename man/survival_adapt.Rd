% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/survival_adapt.R
\name{survival_adapt}
\alias{survival_adapt}
\title{Simulate a single adaptive clinical trial with a time-to-event
endpoint}
\usage{
survival_adapt(
  hazard_treatment,
  hazard_control = NULL,
  cutpoint = 0,
  N_total,
  lambda = 0.3,
  lambda_time = NULL,
  interim_look = NULL,
  end_of_study,
  prior = c(0.1, 0.1),
  block = 2,
  rand_ratio = c(1, 1),
  prop_loss_to_followup = 0.1,
  alternative = "greater",
  h0 = 0,
  futility_prob = 0.05,
  expected_success_prob = 0.9,
  prob_ha = 0.95,
  N_impute = 10,
  N_mcmc = 100,
  imputed_final = TRUE,
  debug = FALSE
)
}
\arguments{
\item{hazard_treatment}{vector. Constant hazard rates under the treatment arm.}

\item{hazard_control}{vector. Constant hazard rates under the control arm.}

\item{cutpoint}{vector. Default is \code{cutpoint = 0}.}

\item{N_total}{integer. Maximum sample size allowable}

\item{lambda}{vector. Enrollment rates across simulated enrollment times. See
\code{\link{enrollment}} for more details.}

\item{lambda_time}{vector. Enrollment time(s) at which the enrollment rates
change. Must be same length as lambda. See
\code{\link{enrollment}} for more details.}

\item{interim_look}{vector. Sample size for each interim look. Note: the
maximum sample size should not be included.}

\item{end_of_study}{scalar. Length of the study; i.e. time at which endpoint
will be evaluated.}

\item{prior}{vector. The prior distributions for the piecewise hazard rate
parameters are each \eqn{Gamma(a_0, b_0)}, with specified (known)
hyper-parameters \eqn{a_0} and \eqn{b_0}. The default non-informative prior
distribution used is Gamma(0.1, 0.1), which is specified by setting
\code{prior = c(0.1, 0.1)}.}

\item{block}{scalar. Block size for generating the randomization schedule.}

\item{rand_ratio}{vector. Randomization allocation for the ratio of control
to treatment. Integer values mapping the size of the block. See
\code{\link{randomization}} for more details.}

\item{prop_loss_to_followup}{scalar. Overall proportion of subjects lost to
follow-up.}

\item{alternative}{character. The string specifying the alternative
hypothesis, must be one of \code{"greater"} (default), \code{"less"} or
\code{"two-sided"}.}

\item{h0}{scalar. Null hypothesis value of \eqn{p_\text{treatment} -
p_\text{control}}. Default is \code{h0 = 0}.}

\item{futility_prob}{scalar \code{[0, 1]}. Probability threshold to stop
early for futility.}

\item{expected_success_prob}{scalar \code{[0, 1]}. Probability threshold to
stop early for expected success.}

\item{prob_ha}{scalar \code{[0, 1]}. Probability threshold of alternative
hypothesis.}

\item{N_impute}{integer. Number of imputations for Monte Carlo simulation of
missing data.}

\item{N_mcmc}{integer. Number of samples to from the posterior
distribution.}

\item{imputed_final}{logical. Should the final analysis (after all subjects
have been followed-up to the study end) be based on imputed outcomes for
subjects who were LTFU (i.e. right-censored with time
\code{<end_of_study})? Default is \code{TRUE}. Setting to \code{FALSE}
means that the final analysis would incorporate right-censoring.}

\item{debug}{logical. If \code{TRUE} can be used to debug aspects of the
code. Default is \code{debug = FALSE}.}
}
\value{
A list containing key input parameters (arguments) as well as
statistics from the analysis, including:

\describe{
\item{\code{N_treatment}}{
integer. The number of patients enrolled in the treatment arm for
each simulation.}
\item{\code{N_control}}{
integer. The number of patients enrolled in the control arm for
each simulation.}
\item{\code{est_interim}}{
scalar. The treatment effect that was estimated at the time of the
interim analysis. Note this is not actually used in the final
analysis.}
\item{\code{est_final}}{
scalar. The treatment effect that was estimated at the final analysis.
Final analysis occurs when either the maximum sample size is reached
and follow-up complete, or the interim analysis triggered an early
stopping of enrollment/accrual and follow-up for those subjects is
complete.}
\item{\code{post_prob_ha}}{
scalar. The corresponding posterior probability from the final
analysis.}
\item{\code{stop_futility}}{
integer. A logical indicator of whether the
trial was stopped early for futility.}
\item{\code{stop_expected_success}}{
integer. A logical indicator of whether the
trial was stopped early for expected success.}
}
}
\description{
Simulate a single adaptive clinical trial with a time-to-event
endpoint
}
\examples{
# RCT with exponential hazard (no piecewise breaks)
# Note: the number of imputations is small to enable this example to run
#       quickly on CRAN tests. In practice, much larger values are needed.
survival_adapt(
 hazard_treatment = -log(0.85) / 36,
 hazard_control = -log(0.7) / 36,
 cutpoint = 0,
 N_total = 600,
 lambda = 20,
 lambda_time = NULL,
 interim_look = 400,
 end_of_study = 36,
 prior = c(.1, .1),
 block = 2,
 rand_ratio = c(1, 1),
 prop_loss_to_followup = 0.30,
 alternative = "less",
 h0 = 0,
 futility_prob = 0.05,
 expected_success_prob = 0.9,
 prob_ha = 0.975,
 N_impute = 10,
 N_mcmc = 10)
}
